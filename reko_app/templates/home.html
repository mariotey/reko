{% extends "layout.html" %}

{% block style %}
    <link rel="stylesheet" type="text/css" href="../static/css/home.css">
{% endblock %}

{% block body %}
    <div class="content_header">
        <div class="header">
            <div class="messages">
                {% with messages = get_flashed_messages() %}
                    {% if messages %}
                        {% for msg in messages %}
                            <p>{{ msg }}</p>
                        {% endfor %}
                    {% endif %}
                {% endwith %}
            </div>
            <div class="logout">
                <a href="{{ url_for('logout') }}">Logout</a>
            </div>
        </div>
    </div>

    <div class="content">
        <!-- File Input / Upload -->
        <div class="upload-section">
            <h2>Upload your Excel file here</h2>
            <form id="uploadForm" action="{{ url_for('home') }}" method="POST" enctype="multipart/form-data" >
                <input type="file" name="file-to-save" accept=".xlsx, .xls" />
                <button class="upload-button">Upload</button>
            </form>
        </div>

        <!-- Metric Input -->
        <div class="metric-input-section">
            <h2>Add general metrics for your survey</h2>
            <div class="metric-input">
                <input type="text" id="metricNameInput" placeholder="Metric Name">
                <button id="addMetricButton">Add Metric</button>
            </div>
            <div id="metricList"></div>
        </div>

        <!-- Display Data -->
        <div class="action-buttons">
            <button id="displayButton">Display Data</button>
            <button id="processButton">Process Data</button>
        </div>

        <!-- Original Data Summary -->
        <div id="dataSummary" class="data-summary"></div>

        <!-- Dropdowns for data and chart type selection -->
        <div class="dropdowns">
            <div id="metricsCheckboxList"></div>
            <select id="chartTypeDropdown">
                <option value="bar">Bar Chart</option>
                <option value="line">Line Chart</option>
                <option value="pie">Pie Chart</option>
            </select>
        </div>

        <!-- Render ChartJS -->
        <div class="chart-section">
            <button id="renderChartButton">Render Chart</button>
            <div id="container" class="chart-container">
                <div id="chartContainer">
                    <canvas id="myChart" width="550" height="400"></canvas>
                </div>
                <div id="newDataSummary" class="new-data-summary"></div>
            </div>
        </div>
    </div>

    <!-- JavaScript for Metric -->
    <script src="../static/js/metrics.js"></script>
{% endblock %}
